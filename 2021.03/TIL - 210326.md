**[210326]**



- ì˜¤ëŠ˜ í•œ ì¼
  - ë¯¸ì…˜3 í”¼ë“œë°± ì‚¬í•­ ìˆ˜ì •
    - ì˜¤íƒ€, ì„¸ë¶€ ì½”ë“œ ìˆ˜ì •
    - UserControllerì—ì„œ ì„œë¹„ìŠ¤ ê³„ì¸µ ë¶„ë¦¬ ğŸ¤¯ (with ì´ë…¸)
  - QuestionControllerì—ì„œ ì„œë¹„ìŠ¤ ê³„ì¸µ ë¶„ë¦¬(ì§„í–‰ ì¤‘)
  - ê°€ì¡±ë“¤ê³¼ ê³ ê¸°ë¨¹ê¸°ğŸ¥©
- ë°°ìš´ ì 
  - ìŠ¤í”„ë§ ì›¹ ê³„ì¸µ - ì„œë¹„ìŠ¤ ê³„ì¸µ
  - Optional ë©”ì†Œë“œ
- ê°œì„ í•  ì 
  - ì´ ì •ë„ë©´ ì—´ì‹¬íˆ ì‚´ì•˜ë‹¤..(2)



---

## [ë¯¸ì…˜3 í”¼ë“œë°±](https://github.com/codesquad-members-2021/spring-boot-qna/pull/121)

### ìŠ¤í”„ë§ ì›¹ ê³„ì¸µ - ì„œë¹„ìŠ¤ Service

> í˜„ì¬ëŠ” ê³„ì¸µì´ Repository, Controller ë‘ê°œì´ê³ , repositoryëŠ” ì¡°íšŒë§Œ í•˜ë‹ˆê¹.. ì–´ë–¤ ë°ì´í„°ë¥¼ ì¡°ì‘í•˜ëŠ” ë¡œì§ì´ Controllerì— private ë©”ì„œë“œë¡œ ê³„ì† ì¶”ê°€ë  ê²ƒ ê°™ì€ë°ìš”, **repository, controller ì‚¬ì´ì— private ë©”ì„œë“œë¥¼ ìˆ˜í–‰í•  ê³„ì¸µ**ì´ ìˆìœ¼ë©´ ì–´ë–¨ê¹Œìš”?
>
> ì‹¤ì€ **Service**ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í´ë˜ìŠ¤ë¥¼ ë§í•˜ëŠ” ê²ƒì´êµ¬ìš”ã…ã… ê³„ì¸µ(ë ˆì´ì–´ë¼ê³  ë§í•˜ëŠ”ê²Œ í¸í•©ë‹ˆë‹¤ë§Œ)ì€ ì–´ë–¤ ê¸°ì¤€ì—ì„œ ë‚˜ëˆ„ê³ , ë‚˜ëˆ„ë©´ ì–´ë–¤ ì ë“¤ì´ ì¢‹ì€ì§€ ì°¾ì•„ë³´ì‹œê³ ìš”!
> ìŠ¤í”„ë§ì—ì„œëŠ” ì£¼ë¡œ ì–´ë–»ê²Œ í•˜ë”ë¼~ ëŠ” ì¼ì¢…ì˜ ì»¨ë²¤ì…˜ë„ ì•Œì•„ë³´ëŠ”ê²ƒì„ ê¶Œí•´ë“œë¦½ë‹ˆë‹¤. (ì ë‹¹íˆ ì°¾ì•„ë³´ì‹œëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤. ã…ã… ì´ê²ƒë„ ê¹Šê²Œ ê°€ë©´ ì˜ê²¬ë“¤ì´ ë„ˆë¬´ ê°ˆë ¤ì„œë¦¬..)

### [ìŠ¤í”„ë§ ì›¹ ê³„ì¸µ](https://kyu9341.github.io/java/2020/07/08/java_springBoot_Layer/)

![vs_write](https://kyu9341.github.io/img/springLayer.png)

1. Web Layer ì›¹ ê³„ì¸µ

   - **ì™¸ë¶€ ìš”ì²­ê³¼ ì‘ë‹µ**ì— ëŒ€í•œ ì „ë°˜ì ì¸ ì˜ì—­

   - Controller, View

   - exception handlers (Controller Advice)

2. Service Layer ì„œë¹„ìŠ¤ ê³„ì¸µ

   - Controllerì™€ DAOì˜ ì¤‘ê°„ ì˜ì—­

   - `@Service`ì˜ì—­

   - `@Transactional`ì´ ì‚¬ìš©ë˜ì–´ì•¼ í•˜ëŠ” ì˜ì—­

   - ì„œë¹„ìŠ¤ì—ì„œëŠ” íŠ¸ëœì­ì…˜ê³¼ ë„ë©”ì¸ ê°„ì˜ ìˆœì„œë§Œ ë³´ì¥í•œë‹¤.

3. Repository Layer ë¦¬í¬ì§€í† ë¦¬ ê³„ì¸µ
   - DB(ë°ì´í„° ì €ì¥ì†Œ)ì— ì ‘ê·¼í•˜ëŠ” ì˜ì—­
   - DAO(Data Access Object) ì˜ì—­ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.

4. DTOs 
   - DTOì˜ ì˜ì—­.

5. Domain Model
   - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ì˜ì—­
   - ë„ë©”ì¸ì„ ê³µìœ í•  ìˆ˜ ìˆë„ë¡ ë‹¨ìˆœí™”ì‹œí‚¨ ê²ƒì„ ë„ë©”ì¸ ëª¨ë¸ì´ë¼ê³  í•œë‹¤.
   - `@Entity`ê°€ ì‚¬ìš©ëœ ì˜ì—­
   - ë¬´ì¡°ê±´ DB í…Œì´ë¸”ê³¼ ê´€ê³„ê°€ ìˆì–´ì•¼ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.
   - VOê°™ì€ ê°’ ê°ì²´ë“¤ë„ ì´ ì˜ì—­ì— í•´ë‹¹í•œë‹¤.
     - ì˜ˆë¥¼ ë“¤ì–´ íƒì‹œ ì•±ì¼ ë•Œ, ë°°ì°¨-íƒ‘ìŠ¹-ìš”ê¸ˆ ë“±ì´ ëª¨ë‘ ë„ë©”ì¸ì´ ë  ìˆ˜ ìˆë‹¤.

### ìš©ì–´ ì •ë¦¬

- DTO, Data Transfer Object
  - ê° ê³„ì¸µ ê°„ ë°ì´í„° êµí™˜ì„ ìœ„í•œ ìë°” ê°ì²´.
  - ë°ì´í„°ë¥¼ ê° ë ˆì´ì–´ ê°„ì— ì „ë‹¬í•˜ëŠ” ëª©ì ìœ¼ë¡œ ì‚¬ìš©.
  - ê°ì²´ì˜ ì†ì„±(property)ê³¼ getter, setterë§Œ ê°€ì§€ê³  ìˆë‹¤.
    - VO(Value Object)ë¼ê³ ë„ í•œë‹¤.
- DAO, Data Access Object
  - DBë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê±°ë‚˜ ì¡°ì‘í•˜ëŠ” ê¸°ëŠ¥ì„ ì „ë‹´í•˜ë„ë¡ ë§Œë“  ê°ì²´

### ì™œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ (ì„œë¹„ìŠ¤ ê³„ì¸µì´ ì•„ë‹Œ) ë„ë©”ì¸ ê³„ì¸µì— ì‘ì„±í•˜ëŠ”ê°€? 

- Service LayerëŠ” ë‹¤ì–‘í•œ Model(Domain)ì„ ì½ì–´ ì œê³µí•œë‹¤.
  - ë³µì¡í•œ ì„œë¹„ìŠ¤ëŠ” ë” ë§ì€ Modelì„ ì½ì–´ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê¸° ë–„ë¬¸ì— Service ë¡œì§ì˜ ë³µì¡ë„ê°€ ë§¤ìš° ë†’ì•„ì§„ë‹¤.
- Service ë¡œì§ì˜ ë³µì¡ë„ë¥¼ ë‚®ì¶”ê¸° ìœ„í•´ ìµœëŒ€í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ Model(Domain) ìª½ìœ¼ë¡œ ì´ë™ì‹œí‚¨ë‹¤.
  - ë³µì¡ë„ë¥¼ ë‚®ì¶¤ìœ¼ë¡œì¨ ìœ ì§€ë³´ìˆ˜ì™€ í…ŒìŠ¤íŠ¸ê°€ ì‰¬ìš´ ì½”ë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤
  - ìœ ì—°í•œ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

### ì„œë¹„ìŠ¤ ê³„ì¸µ ì‘ì„± ì‹œ ì£¼ì˜ì‚¬í•­

- ServiceëŠ” ë‹¤ë¥¸ Serviceë¥¼ ì¡°í•©í•˜ê±°ë‚˜ DAOë¥¼ ì—°ê²°í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.
- ServiceëŠ” ê°€ë³ê²Œ.
  - Serviceì— í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ êµ¬í˜„í•˜ê¸°ë³´ë‹¤ëŠ”, ë¡œì§ì˜ ìƒíƒœê°’ì„ ê°€ì§€ê³  ìˆëŠ” ëª¨ë¸ì´ ë‹´ë‹¹í•´ì•¼ í•œë‹¤.
- Serviceì—ì„œ Servieë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìœ¼ë‚˜, ê³„ì¸µêµ¬ì¡°ê°€ ëª…í™•í•´ì•¼ í•œë‹¤. (ìˆœí™˜ì°¸ì¡° ë°©ì§€)



## [Optional] ë©”ì„œë“œ 

Optional ë©”ì„œë“œë“¤ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬.

- `get()`
  - ë¹„ì–´ ìˆëŠ” Optional ê°ì²´ë¥¼ ë°˜í™˜í•¨

- `empty()`
  - Optionalê°ì²´ë¥¼ nullë¡œ ì´ˆê¸°í™”í•¨
- `isPresent()` 
  - Optional ê°ì²´ì— ì €ì¥ëœ ê°’ì´ nullì¸ì§€ ì•„ë‹Œì§€ í™•ì¸í•œë‹¤.

- `orElse()`
  - ì €ì¥ëœ ê°’ì´ ì¡´ì¬í•˜ë©´ ê·¸ ê°’ì„ ë°˜í™˜í•˜ê³ , ê°’ì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ íŒŒë¼ë¯¸í„°ì˜ ê°’ì„ ë°˜í™˜í•¨

- `orElseGet()`
  - ì €ì¥ëœ ê°’ì´ ì¡´ì¬í•˜ë©´ ê·¸ ê°’ì„ ë°˜í™˜í•˜ê³ , ê°’ì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ íŒŒë¼ë¯¸í„°ì˜ ëŒë‹¤ì‹ ê²°ê´ê°’ì„ ë°˜í™˜í•¨

- `orElseThrow()`
  - ì €ì¥ëœ ê°’ì´ ì¡´ì¬í•˜ë©´ ê·¸ ê°’ì„ ë°˜í™˜í•˜ê³ , ê°’ì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ íŒŒë¼ë¯¸í„°ì˜ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚´

### [Optional ì‚¬ìš© ì‹œ ìœ ì˜ì‚¬í•­](http://homoefficio.github.io/2019/10/03/Java-Optional-%EB%B0%94%EB%A5%B4%EA%B2%8C-%EC%93%B0%EA%B8%B0/)

1. `isPresent()-get()` ëŒ€ì‹  `orElse()/orElseGet()/orElseThrow()`
   - ì½”ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤

2. `orElse(new ...)` ëŒ€ì‹  `orElseGet(() -> new ...)`
   - `orElse(...)`ì—ì„œ `...`ëŠ” `Optional`ì— ê°’ì´ ìˆë“  ì—†ë“  ë¬´ì¡°ê±´ ì‹¤í–‰ëœë‹¤. ë”°ë¼ì„œ `...`ê°€ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°ì—ëŠ” `orElse()` ëŒ€ì‹  `orElseGet()`ì„ ì¨ì•¼í•œë‹¤.
3. ë‹¨ìˆœíˆ ê°’/nullë§Œ ì–»ì„ ëª©ì ì´ë¼ë©´ Optional ëŒ€ì‹  `null`ë¹„êµ(`!=null`)ë¥¼ ì‚¬ìš©í•œë‹¤.
4. `Optional` ëŒ€ì‹  ë¹„ì–´ìˆëŠ” ì»¬ë ‰ì…˜ ë°˜í™˜
5. `Optional`ì„ í•„ë“œë¡œ ì‚¬ìš© ê¸ˆì§€
6. `Optional`ì„ ìƒì„±ìë‚˜ ë©”ì„œë“œ ì¸ìë¡œ ì‚¬ìš© ê¸ˆì§€
7. `Optional`ì„ ì»¬ë ‰ì…˜ì˜ ì›ì†Œë¡œ ì‚¬ìš© ê¸ˆì§€
8. `of()`, `ofNullable()` í˜¼ë™ ì£¼ì˜
9. `Optional<T>` ëŒ€ì‹  `OptionalInt`, `OptionalLong`, `OptionalDouble`



## Todo - ë‚´ì¼

- ë‚´ì¼ê¹Œì§€ QuestionServiceì™„ì„±í•˜ê³  ë¯¸ì…˜3 ì¬PR ë³´ë‚´ê¸°
- @Serviceì— ëŒ€í•´..

## Todo Queue

- ë¯¸ì…˜3ë™ì˜ìƒ ë¹ ì§„ë¶€ë¶„ ë“£ê¸° [ì¤‘ë³µ ì œê±°, clean code, ì¿¼ë¦¬ ë³´ê¸° ì„¤ì •](https://youtu.be/DaqWKDvdmAk)
- ë¯¸ì…˜4 ë™ì˜ìƒ ì¡°ê¸ˆì´ë¼ë„ ë“£ê¸°
- QuestionController -> Service ë¡œì§ ë¶„ë¦¬í•˜ê¸°
- í¬ìŠ¤íŠ¸ë§¨ ì‚¬ìš©ë²• ìµíˆê¸°
- Optional
  - https://mangkyu.tistory.com/70 
  - [ì´ë…¸ ì¶”ì²œ ë§í¬](http://homoefficio.github.io/2019/10/03/Java-Optional-%EB%B0%94%EB%A5%B4%EA%B2%8C-%EC%93%B0%EA%B8%B0/)

----------------------ìµœì†Œí•œ ì—¬ê¸°ê¹Œì§€ ì£¼ë§ë™ì•ˆ í•´ê²°í•˜ê¸°

- [ì§„ì§œ ì…ë¬¸ìë¥¼ ìœ„í•œ í´ë¼ìš°ë“œì™€ AWS](https://www.inflearn.com/course/aws-starter/dashboard) ë“£ê¸°
  - [ì‹¤ìŠµìœ¼ë¡œ ë°°ìš°ëŠ” AWS í•µì‹¬ ì„œë¹„ìŠ¤](https://www.inflearn.com/course/aws-%ED%95%B5%EC%8B%AC-%EC%8B%A4%EC%8A%B5/dashboard)
- Logger, LoggerFactory ê³µë¶€í•´ì„œ ì‚¬ìš©í•˜ê¸°(ë£¨ì¹´ìŠ¤ 'ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬'ì°¸ê³ )
- ìŠ¤í”„ë§MVCêµ¬ì¡° ë° Model, Domainì— ëŒ€í•´ ì•„ë˜ ë§í¬ ì°¸ê³ í•´ì„œ ë” ê³µë¶€í•˜ê¸°.
  - [What is the difference between an MVC Model object, a domain object and a DTO](https://stackoverflow.com/questions/3853749/what-is-the-difference-between-an-mvc-model-object-a-domain-object-and-a-dto)
  - [Spring MVC êµ¬ì¡°ì— ëŒ€í•œ ì¢‹ì€ ê·¸ë¦¼ê³¼ ì„¤ëª…](https://justforchangesake.wordpress.com/2014/05/07/spring-mvc-request-life-cycle/)
- [íŠ¸ëœì­ì…˜](http://egloos.zum.com/sweeper/v/3003805)

