**[210427]**







## 수업 정리

### Spring Data JDBC에서 N:1이 안 되는 이유

: 엄격하게 DDD컨셉을 지키기 위해 일부러 지원하지 않는다.

(Spring Data JDBC 외에는 다들 지원한다)

- 1에 다수의 외래키가 생길 수 없기 때문.
-  즉 한 row에 여러 개의 항목(N)이 들어가야 하기 떄문에

DDD - aggregate root를 통해서만 접근하도록 하는 것

aggregate - 강한 일관성을 가져야 하는 데이터의 집합. 강한 일관성이 필요할 때만 aggregate root로 묶는 것이다.

N:1은 aggregate로 묶는 경우가 거의 발생하지 않았기 때문에 (=강한 일관성이 필요없기 때문에) 지원하지 않는다.

(aggregate로 테이블을 묶을수록 코딩이 복잡해짐)

### N:1 (many to one) 은 지원해주진 않지만 구현할 수는 있다.

- 꼭 필요하면 이렇게 해라.
- 하지만 일관성을 보장해 주진 않는다.

1. 1 쪽에 `N이름Id` 속성을 추가한다
2. N 테이블 생성 시 `N이름Id`를 외래키로 설정한다

Repsitory가 인터페이스인 이유?

인터페이스 구현체는 프레임워크가 만들어 주기 때문

N:M (many to many)

N:M은 1:N + N:1로 구현한다!



## Spring Data JDBC - 객체(Object)와 개체(Entity) 대응시키기

오늘 배운 Spring Data JDBC에서 1:N Map으로 표현하기를 해 보다 잘 모르겠어서 구글링을 하니, https://skyblue300a.tistory.com/8 라는 좋은 글을 찾았다.

일단 읽어서 이해하고 내일 정리해야겠다. (22)... ㅠㅠ





valueOf(String) : 문자열을 가지고 똑같은 enum을 찾는 메서드





## AWS Ubuntu에 스프링 앱 배포 과정 다시 정리 ..

우분투에 mysql 설치

MySQL 설치

- `sudo apt update`

- `sudo apt-get install mysql-server`

MySQL 접속

- `mysql -u root -p`
  - (잘 안 되면 `sudo mysql -u root -p`)
  - (패스워드는 설정한 값 입력, 없으면 그냥 엔터)
- 생성한 유저로 접속하려면 `mysql -u 유저이름 -p`

MySQL 사용자 생성

- `create user '사용자이름'@'ip주소' identified by '비밀번호';`
- `flush privileges;`
- 모든 ip에서 접속을 허용하고 싶다면 `create user '사용자이름'@'%' identified by '비밀번호'`
- 이후 접속시 `mysql -u 사용자이름 -p` 후 비밀번호로 설정한 `비밀번호`입력

MySQL 사용자 확인

- `use mysql;` - `select user, host, authentication_string from user;`

MySQL 사용자에 권한 부여

- `grant all privileges on 데이터베이스명.테이블명 to '사용자명'@'ip주소';`

- 모든 데이터베이스, 테이블에 접근 허용 및 모든 ip 접속가능한 사용자일 때 : 

  - `grant all privileges on *.* to '사용자명'@'%';`

    

