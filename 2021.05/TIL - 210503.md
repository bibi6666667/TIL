**[210503]**



## 수업 정리

22, 80 포트만 열어둔다

VPC란?

여러 AWS네트워크들을 묶어서 관리하는 시스템.

NAT : DB가 인터넷을 쓰고 싶을 때 사용

Jump In : 접속 전용 서버



---

## 야구 룰

- 팀당 10명의 선수
- 9회에 걸쳐 경기 (경기시간은 정해져 있지 않음)
  - 1회는 초와 말로 나뉨
- 원정 팀의 공격이 먼저, 홈 팀의 공격이 나중.
- 각 팀의 9명의 타자가 순서에 따라 공격
- 공격 기회 내에서 3번 아웃을 당하면 상대팀과 공격/수비를 교대함
- 공격 기회 내에서 3번 아웃을 당하기 전에 홈플레이트를 밟으면 득점

포지션

- 내야수 - 각 베이스를 지키는 선수 (1루수, 2루수, 3루수)
- 투수 - 마운드 위에서 공을 던지는 선수
- 포수 - 투수의 공을 받고 홈을 지키는 선수
- 외야수 - 외곽에서 수비하는 선수 (좌익수, 중견수, 우익수)

스트라이크존

- 스트라이크 : 공이 스트라이크 존을 통과하는 것
- 공이 스트라이크존을 세 번 통과하면 타자들은 삼진으로 아웃을 당한다. (삼진아웃)
  - 따라서 투수들은 스트라이크 존에 공을 던져야 한다. (상대편 타자를 아웃시키기 위해)
  - 타자가 헛스윙을 날리면 스트라이크존에 관계없이 스트라이크
- 볼 : 공이 스트라이크 존 바깥을 통과하는 것
  - 볼이 4개면 볼넷으로, 타자가 1루로 걸어갈 수 있다
- 아웃 : 타자가 아웃당하는 경우
  - 타자가 친 공을 수비수가 바로 잡았을 때 (공이 땅에 떨어지지 않음)
  - 스트라이크 3번 (삼진아웃)
  - 루에 타자보다 공이 먼저 도착한 경우
  - 3아웃은 공격/수비가 바뀌는 기준이 된다.

공격/수비

공격 팀과 수비 팀이 있다. 

공격 팀 = 타자가 나와 순서대로 투수가 던지는 공을 친다

수비 팀 = 공격 팀 타자가 친 공을 잡아낸다

- 안타 : 타자가 베이스에 안전하게 갈 수 있도록 친 타구

- 홈런 : 타자가 친 공이 외야펜스를 넘기는 것
  - 수비가 공을 잡을 수 없으므로 마운트에 있던 모든 주자가 홈으로 들어와 득점할 수 있다.



## 프로젝트 셋팅

OAuth 적용하기 (깃허브)

게임 첫 화면

- 게임 목록(A vs B)

중계 영역

상세 점수

선수 명단

DB

- 팀 정보
- 선수 정보
- 게임 진행상황
  - 상세 점수
  - 공격, 수비
- 사용자 정보

배포

- AWS VPC - EC2서브넷과 DB서브넷 구분 생성
- 웹서버와 DB 분리
- S3에 jar파일을 올리고 jar를 감지해 서버에서 자동 배포 (git hook, crontab 사용)
- 가능한 매일 배포
- 프론트 배포는 NginX 사용(80포트만 외부에 개방)



## DB 설계

어떻게 설계할지 각자 나름대로 생각해 오기!

- 팀 team
  - id
  - name
- 생각해 보니 매치 항목은 DB에 저장하기보다 team에서 2 팀 빼오면 될듯..
- 선수 player
  - id
  - name 이름
  - team id 소속 팀 - team id를 FK로 가짐
  - state 상태 - 현재 타자인지/아웃인지/안타인지..
- 선수 내역 playerLog - 중계 영역에 표시될 정보
  - id
  - game id
  - player id
  - ball 볼 - 스트라이크/볼
  - ball count 볼카운트
  - 타석??/안타hits/아웃out 횟수
  - 평균치
  - 합계
- 현재 게임 game
  - id
  - team1
  - team2
  - offense (공격 - top/bottom) - 1/2
  - defense (수비 - top/bottom) - 1/2
  - point1 점수
  - point2
  - inning (회)
  - 
  - home
- 차례(턴) turn ?? 
  - id
  - game id
  - team1
  - team2
  - strike
  - ball
  - out
  - base1
  - base2
  - base3
  - pitcher 투수
  - hitter 타자
  - catcher 포수
- 사용자 user
  - id
  - name

- 컴퓨터 computer ?
- 점수 score
  - id
  - game id
  - score1~9  ??
  - R